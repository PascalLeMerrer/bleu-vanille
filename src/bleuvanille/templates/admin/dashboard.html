{{define "admin/dashboard"}}
{{template "header"}}
    <header id="header" role="banner" class="grid-3">
        <div><h1>Bleu Vanille</h1></div>
        <div><h1>Administration</h1></div>
        <div class="txtright"><logout firstname="{{ .Firstname }}" lastname="{{ .Lastname }}"></logout></div>
    </header>
    <div class="flex-container">
        <modal></modal>
        <admin-menu></admin-menu>
        <div id="main" role="main" class="flex-item-fluid pam">
            <alert></alert>
            <contact-list></contact-list>
            <user-list></user-list>
        </div>
    </div>
    <footer id="footer" role="contentinfo" class="line pam txtcenter">
        contenu du pied de page
    </footer>
    <script type="text/javascript" src="/js/superagent.js"></script>
    <script type="text/javascript" src="/js/riot.min.js"></script>
    <script type="text/javascript" src="/tags/alert.js"></script>
    <script type="text/javascript" src="/tags/logout.js"></script>
    <script type="text/javascript" src="/tags/admin-menu.js"></script>
    <script type="text/javascript" src="/tags/contactlist.js"></script>
    <script type="text/javascript" src="/tags/user-list.js"></script>
    <script type="text/javascript" src="/tags/modal.js"></script>
    <script type="text/javascript">
      var bus = {};
      var currentTagName = null;
      riot.observable(bus);
      bus.on('disconnected', function() {
        window.location = '/admin'
      })
      var tags = riot.mount('user-list', { bus: bus})

      bus.on('display', function(selectedTagName) {
        for (var i = tags.length - 1; i >= 0; i--) {
          if(tags[i].root.localName === currentTagName) {
            tags[i].unmount(true);
          }
        };
        tags = riot.mount(selectedTagName, { bus: bus})
        console.log(currentTagName, selectedTagName)
        currentTagName = selectedTagName
        riot.update()
      })
      riot.mount('admin-menu', { bus: bus})
      riot.mount('logout', { bus: bus})
      riot.mount('modal', { bus: bus})

    </script>
{{template "footer"}}
{{end}}